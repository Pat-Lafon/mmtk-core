<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `metadata` mod in crate `mmtk`."><meta name="keywords" content="rust, rustlang, rust-lang, metadata"><title>mmtk::policy::marksweepspace::malloc_ms::metadata - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../../../../normalize.css"><link rel="stylesheet" href="../../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../../../../ayu.css" disabled><link rel="stylesheet" href="../../../../../dark.css" disabled><link rel="stylesheet" href="../../../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../../../storage.js"></script><script defer src="../../../../../main.js"></script><noscript><link rel="stylesheet" href="../../../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../../../mmtk/index.html"><div class="logo-container"><img class="rust-logo" src="../../../../../rust-logo.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../../../mmtk/index.html"><div class="logo-container"><img class="rust-logo" src="../../../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module metadata</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../../../wheel.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Module <a href="../../../../index.html">mmtk</a>::<wbr><a href="../../../index.html">policy</a>::<wbr><a href="../../index.html">marksweepspace</a>::<wbr><a href="../index.html">malloc_ms</a>::<wbr><a class="mod" href="#">metadata</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../../../src/mmtk/policy/marksweepspace/malloc_ms/metadata.rs.html#1-287">source</a> Â· <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CHUNK_MAP_LOCK.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::CHUNK_MAP_LOCK struct">CHUNK_MAP_LOCK</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">Lock to synchronize the mapping of side metadata for a newly allocated chunk by malloc</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CHUNK_METADATA.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::CHUNK_METADATA struct">CHUNK_METADATA</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.MAX_METADATA_ADDRESS.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::MAX_METADATA_ADDRESS struct">MAX_METADATA_ADDRESS</a></div><div class="item-right docblock-short">Maximum metadata address for the ACTIVE_CHUNK_METADATA_SPEC which is used to check bounds</div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.ACTIVE_CHUNK_METADATA_SPEC.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::ACTIVE_CHUNK_METADATA_SPEC constant">ACTIVE_CHUNK_METADATA_SPEC</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">Metadata spec for the active chunk byte</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.ACTIVE_PAGE_METADATA_SPEC.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::ACTIVE_PAGE_METADATA_SPEC constant">ACTIVE_PAGE_METADATA_SPEC</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">Metadata spec for the active page byte</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.OFFSET_MALLOC_METADATA_SPEC.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::OFFSET_MALLOC_METADATA_SPEC constant">OFFSET_MALLOC_METADATA_SPEC</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.compare_exchange_set_page_mark.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::compare_exchange_set_page_mark fn">compare_exchange_set_page_mark</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">Set the page mark from 0 to 1. Return true if we set it successfully in this call.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.has_object_alloced_by_malloc.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::has_object_alloced_by_malloc fn">has_object_alloced_by_malloc</a></div><div class="item-right docblock-short">Check if there is an object allocated by malloc at the address.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_alloced_by_malloc.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::is_alloced_by_malloc fn">is_alloced_by_malloc</a></div><div class="item-right docblock-short">Check if a given object was allocated by malloc</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_chunk_mapped.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::is_chunk_mapped fn">is_chunk_mapped</a></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_chunk_marked.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::is_chunk_marked fn">is_chunk_marked</a></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_chunk_marked_unsafe.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::is_chunk_marked_unsafe fn">is_chunk_marked_unsafe</a><sup title="unsafe function">âš </sup></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_marked.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::is_marked fn">is_marked</a></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_marked_unsafe.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::is_marked_unsafe fn">is_marked_unsafe</a><sup title="unsafe function">âš </sup></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_meta_space_mapped.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::is_meta_space_mapped fn">is_meta_space_mapped</a></div><div class="item-right docblock-short">Check if metadata is mapped for a range [addr, addr + size). Metadata is mapped per chunk,
we will go through all the chunks for [address, address + size), and check if they are mapped.
If any of the chunks is not mapped, return false. Otherwise return true.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_meta_space_mapped_for_address.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::is_meta_space_mapped_for_address fn">is_meta_space_mapped_for_address</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">Check if metadata is mapped for a given address. We check if the active chunk metadata is mapped,
and if the active chunk bit is marked as well. If the chunk is mapped and marked, we consider the
metadata for the chunk is properly mapped.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_offset_malloc.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::is_offset_malloc fn">is_offset_malloc</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">Is this allocation an offset malloc? The argument address should be the allocation address (object start)</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_page_marked.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::is_page_marked fn">is_page_marked</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_page_marked_unsafe.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::is_page_marked_unsafe fn">is_page_marked_unsafe</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> <sup title="unsafe function">âš </sup></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.load128.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::load128 fn">load128</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> <sup title="unsafe function">âš </sup></div><div class="item-right docblock-short">Load u128 bits of side metadata</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.map_active_chunk_metadata.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::map_active_chunk_metadata fn">map_active_chunk_metadata</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">Eagerly map the active chunk metadata surrounding <code>chunk_start</code></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.map_meta_space.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::map_meta_space fn">map_meta_space</a></div><div class="item-right docblock-short">We map the active chunk metadata (if not previously mapped), as well as the VO bit metadata
and active page metadata here. Note that if [addr, addr + size) crosses multiple chunks, we
will map for each chunk.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.set_chunk_mark.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::set_chunk_mark fn">set_chunk_mark</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.set_mark_bit.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::set_mark_bit fn">set_mark_bit</a></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.set_offset_malloc_bit.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::set_offset_malloc_bit fn">set_offset_malloc_bit</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">Set the offset bit for the allocation. The argument address should be the allocation address (object start)</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.set_page_mark.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::set_page_mark fn">set_page_mark</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.set_vo_bit.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::set_vo_bit fn">set_vo_bit</a></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.unset_chunk_mark_unsafe.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::unset_chunk_mark_unsafe fn">unset_chunk_mark_unsafe</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> <sup title="unsafe function">âš </sup></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.unset_mark_bit.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::unset_mark_bit fn">unset_mark_bit</a><sup title="unsafe function">âš </sup></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.unset_offset_malloc_bit_unsafe.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::unset_offset_malloc_bit_unsafe fn">unset_offset_malloc_bit_unsafe</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> <sup title="unsafe function">âš </sup></div><div class="item-right docblock-short">Unset the offset bit for the allocation. The argument address should be the allocation address (object start)</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.unset_page_mark_unsafe.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::unset_page_mark_unsafe fn">unset_page_mark_unsafe</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> <sup title="unsafe function">âš </sup></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.unset_vo_bit.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::unset_vo_bit fn">unset_vo_bit</a></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.unset_vo_bit_unsafe.html" title="mmtk::policy::marksweepspace::malloc_ms::metadata::unset_vo_bit_unsafe fn">unset_vo_bit_unsafe</a><sup title="unsafe function">âš </sup></div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../../../../" data-current-crate="mmtk" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.1 (90743e729 2023-01-10)" ></div></body></html>