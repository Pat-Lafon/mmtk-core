<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This module updates of VO bits during GC.  It is used for spaces that do not clear the metadata of some dead objects during GC.  Currently, only ImmixSpace is affected."><title>mmtk::util::metadata::vo_bit::helper - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../../static.files/rustdoc-f3501f0f5ae15dfb.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../../../../" data-static-root-path="../../../../../static.files/" data-current-crate="mmtk" data-themes="" data-resource-suffix="" data-rustdoc-version="1.71.1 (eb26296b5 2023-08-03)" data-search-js="search-4926e5fc22a5646a.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../../../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../../../../../static.files/main-f0540c1d82cde29b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../../../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../../../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../../../mmtk/index.html"><img class="rust-logo" src="../../../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../../../../mmtk/index.html"><img class="rust-logo" src="../../../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module helper</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../../../index.html">mmtk</a>::<wbr><a href="../../../index.html">util</a>::<wbr><a href="../../index.html">metadata</a>::<wbr><a href="../index.html">vo_bit</a>::<wbr><a class="mod" href="#">helper</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../../../src/mmtk/util/metadata/vo_bit/helper.rs.html#1-202">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This module updates of VO bits during GC.  It is used for spaces that do not clear the metadata
of some dead objects during GC.  Currently, only ImmixSpace is affected.</p>
<div><table><thead><tr><th>Policy</th><th>When are VO bits of dead objects cleared</th></tr></thead><tbody>
<tr><td>MarkSweepSpace</td><td>when sweeping cells of dead objects</td></tr>
<tr><td>MarkCompactSpace</td><td>when compacting</td></tr>
<tr><td>CopySpace</td><td>when releasing the space</td></tr>
</tbody></table>
</div>
<p>The policies listed above trivially clear the VO bits for dead objects (individually or in
bulk), and make the VO bits available during tracing.</p>
<p>For ImmixSpace, if a line contains both live and dead objects, live objects will be traced,
but dead objects will not be visited.  Therefore we cannot clear the VO bits of individual
dead objects.  We cannot clear all VO bits for the line in bulk because it contains live
objects.  This module updates the VO bits for such regions (e.g. Immix lines, or Immix blocks
if Immix is configured to be block-only).</p>
<p>We implement several strategies depending on whether mmtk-core or the VM binding also requires
the VO bits to also be available during tracing.</p>
<p>The handling is very sensitive to <code>VOBitUpdateStrategy</code>, and may be a bit verbose.
We abstract VO-bit-related code out of the main GC algorithms (such as Immix) to make it more
readable.</p>
</div></details><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.VOBitUpdateStrategy.html" title="enum mmtk::util::metadata::vo_bit::helper::VOBitUpdateStrategy">VOBitUpdateStrategy</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">The strategy to update the valid object (VO) bits.</div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.need_to_clear_vo_bits_before_tracing.html" title="fn mmtk::util::metadata::vo_bit::helper::need_to_clear_vo_bits_before_tracing">need_to_clear_vo_bits_before_tracing</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="fn" href="fn.on_object_forwarded.html" title="fn mmtk::util::metadata::vo_bit::helper::on_object_forwarded">on_object_forwarded</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="fn" href="fn.on_object_marked.html" title="fn mmtk::util::metadata::vo_bit::helper::on_object_marked">on_object_marked</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="fn" href="fn.on_region_swept.html" title="fn mmtk::util::metadata::vo_bit::helper::on_region_swept">on_region_swept</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="fn" href="fn.on_trace_object.html" title="fn mmtk::util::metadata::vo_bit::helper::on_trace_object">on_trace_object</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="fn" href="fn.strategy.html" title="fn mmtk::util::metadata::vo_bit::helper::strategy">strategy</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Select a strategy for the VM.  It is a <code>const</code> function so it always returns the same strategy
for a given VM.</div></li><li><div class="item-name"><a class="fn" href="fn.validate_config.html" title="fn mmtk::util::metadata::vo_bit::helper::validate_config">validate_config</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li></ul></section></div></main></body></html>