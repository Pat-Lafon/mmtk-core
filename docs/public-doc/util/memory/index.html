<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Wrapper functions for memory syscalls such as mmap, mprotect, etc."><meta name="keywords" content="rust, rustlang, rust-lang, memory"><title>mmtk::util::memory - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../../normalize.css"><link rel="stylesheet" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../../ayu.css" disabled><link rel="stylesheet" href="../../../dark.css" disabled><link rel="stylesheet" href="../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../storage.js"></script><script defer src="../../../main.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../mmtk/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../mmtk/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module memory</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../wheel.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Module <a href="../../index.html">mmtk</a>::<wbr><a href="../index.html">util</a>::<wbr><a class="mod" href="#">memory</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../src/mmtk/util/memory.rs.html#1-367">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Wrapper functions for memory syscalls such as mmap, mprotect, etc.</p>
</div></details><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.dzmmap.html" title="mmtk::util::memory::dzmmap fn">dzmmap</a><sup title="unsafe function">⚠</sup></div><div class="item-right docblock-short">Demand-zero mmap:
This function mmaps the memory and guarantees to zero all mapped memory.
This function WILL overwrite existing memory mapping. The user of this function
needs to be aware of this, and use it cautiously.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.dzmmap_noreplace.html" title="mmtk::util::memory::dzmmap_noreplace fn">dzmmap_noreplace</a></div><div class="item-right docblock-short">Demand-zero mmap (no replace):
This function mmaps the memory and guarantees to zero all mapped memory.
This function will not overwrite existing memory mapping, and it will result Err if there is an existing mapping.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.get_process_memory_maps.html" title="mmtk::util::memory::get_process_memory_maps fn">get_process_memory_maps</a></div><div class="item-right docblock-short">Get the memory maps for the process. The returned string is a multi-line string.
This is only meant to be used for debugging. For example, log process memory maps after detecting a clash.
If we would need to parsable memory maps, I would suggest using a library instead which saves us the trouble to deal with portability.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.handle_mmap_error.html" title="mmtk::util::memory::handle_mmap_error fn">handle_mmap_error</a></div><div class="item-right docblock-short">Properly handle errors from a mmap Result, including invoking the binding code in the case of
an OOM error.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.mmap_fixed.html" title="mmtk::util::memory::mmap_fixed fn">mmap_fixed</a></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.mmap_noreserve.html" title="mmtk::util::memory::mmap_noreserve fn">mmap_noreserve</a></div><div class="item-right docblock-short">mmap with no swap space reserve:
This function does not reserve swap space for this mapping, which means there is no guarantee that writes to the
mapping can always be successful. In case of out of physical memory, one may get a segfault for writing to the mapping.
We can use this to reserve the address range, and then later overwrites the mapping with dzmmap().</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.mprotect.html" title="mmtk::util::memory::mprotect fn">mprotect</a></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.munmap.html" title="mmtk::util::memory::munmap fn">munmap</a></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.munprotect.html" title="mmtk::util::memory::munprotect fn">munprotect</a></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.panic_if_unmapped.html" title="mmtk::util::memory::panic_if_unmapped fn">panic_if_unmapped</a></div><div class="item-right docblock-short">Checks if the memory has already been mapped. If not, we panic.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.result_is_mapped.html" title="mmtk::util::memory::result_is_mapped fn">result_is_mapped</a></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.set.html" title="mmtk::util::memory::set fn">set</a></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.zero.html" title="mmtk::util::memory::zero fn">zero</a></div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="mmtk" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.1 (90743e729 2023-01-10)" ></div></body></html>