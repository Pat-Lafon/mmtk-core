<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This module updates of VO bits during GC.  It is used for spaces that do not clear the metadata of some dead objects during GC.  Currently, only ImmixSpace is affected."><meta name="keywords" content="rust, rustlang, rust-lang, helper"><title>mmtk::util::metadata::vo_bit::helper - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../../../../normalize.css"><link rel="stylesheet" href="../../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../../../../ayu.css" disabled><link rel="stylesheet" href="../../../../../dark.css" disabled><link rel="stylesheet" href="../../../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../../../storage.js"></script><script defer src="../../../../../main.js"></script><noscript><link rel="stylesheet" href="../../../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../../../mmtk/index.html"><div class="logo-container"><img class="rust-logo" src="../../../../../rust-logo.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../../../mmtk/index.html"><div class="logo-container"><img class="rust-logo" src="../../../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module helper</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../../../wheel.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Module <a href="../../../../index.html">mmtk</a>::<wbr><a href="../../../index.html">util</a>::<wbr><a href="../../index.html">metadata</a>::<wbr><a href="../index.html">vo_bit</a>::<wbr><a class="mod" href="#">helper</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../../../src/mmtk/util/metadata/vo_bit/helper.rs.html#1-202">source</a> Â· <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This module updates of VO bits during GC.  It is used for spaces that do not clear the metadata
of some dead objects during GC.  Currently, only ImmixSpace is affected.</p>
<div><table><thead><tr><th>Policy</th><th>When are VO bits of dead objects cleared</th></tr></thead><tbody>
<tr><td>MarkSweepSpace</td><td>when sweeping cells of dead objects</td></tr>
<tr><td>MarkCompactSpace</td><td>when compacting</td></tr>
<tr><td>CopySpace</td><td>when releasing the space</td></tr>
</tbody></table>
</div>
<p>The policies listed above trivially clear the VO bits for dead objects (individually or in
bulk), and make the VO bits available during tracing.</p>
<p>For ImmixSpace, if a line contains both live and dead objects, live objects will be traced,
but dead objects will not be visited.  Therefore we cannot clear the VO bits of individual
dead objects.  We cannot clear all VO bits for the line in bulk because it contains live
objects.  This module updates the VO bits for such regions (e.g. Immix lines, or Immix blocks
if Immix is configured to be block-only).</p>
<p>We implement several strategies depending on whether mmtk-core or the VM binding also requires
the VO bits to also be available during tracing.</p>
<p>The handling is very sensitive to <code>VOBitUpdateStrategy</code>, and may be a bit verbose.
We abstract VO-bit-related code out of the main GC algorithms (such as Immix) to make it more
readable.</p>
</div></details><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.VOBitUpdateStrategy.html" title="mmtk::util::metadata::vo_bit::helper::VOBitUpdateStrategy enum">VOBitUpdateStrategy</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">The strategy to update the valid object (VO) bits.</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.need_to_clear_vo_bits_before_tracing.html" title="mmtk::util::metadata::vo_bit::helper::need_to_clear_vo_bits_before_tracing fn">need_to_clear_vo_bits_before_tracing</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.on_object_forwarded.html" title="mmtk::util::metadata::vo_bit::helper::on_object_forwarded fn">on_object_forwarded</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.on_object_marked.html" title="mmtk::util::metadata::vo_bit::helper::on_object_marked fn">on_object_marked</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.on_region_swept.html" title="mmtk::util::metadata::vo_bit::helper::on_region_swept fn">on_region_swept</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.on_trace_object.html" title="mmtk::util::metadata::vo_bit::helper::on_trace_object fn">on_trace_object</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.strategy.html" title="mmtk::util::metadata::vo_bit::helper::strategy fn">strategy</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">Select a strategy for the VM.  It is a <code>const</code> function so it always returns the same strategy
for a given VM.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.validate_config.html" title="mmtk::util::metadata::vo_bit::helper::validate_config fn">validate_config</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../../../../" data-current-crate="mmtk" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.1 (90743e729 2023-01-10)" ></div></body></html>