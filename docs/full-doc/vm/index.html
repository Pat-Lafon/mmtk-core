<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="MMTk-to-VM interface: the VMBinding trait."><meta name="keywords" content="rust, rustlang, rust-lang, vm"><title>mmtk::vm - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a class="sidebar-logo" href="../../mmtk/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.png" alt="logo"></div>
        </a><h2 class="location">Module vm</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li></ul></div><div id="sidebar-vars" data-name="vm" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../mmtk/index.html"><img class="rust-logo" src="../../rust-logo.png" alt="logo"></a><nav class="sub"><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">mmtk</a>::<wbr><a class="mod" href="#">vm</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/mmtk/vm/mod.rs.html#1-75" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>MMTk-to-VM interface: the VMBinding trait.</p>
<p>This module provides VM-specific traits that serve as MMTK-to-VM interfaces.
Each VM binding needs to provide an implementation for each of the traits.
MMTk requires the interfaces to be efficient, as some of the methods are called frequently
during collection (e.g. the methods for <code>ObjectModel</code>). We rely on cross-crate <em>link-time-optimization</em>
to remove the overhead of MMTk invoking methods on those traits.</p>
<p>It is recommended for a VM binding that uses mmtk-core to do the following to ensure LTO is enabled for performance.</p>
<ol>
<li>Add the following section in the manifest file of a VM binding (<code>Cargo.toml</code>). This enables LTO for the release build:
<div class="example-wrap"><pre class="rust rust-example-rendered"><code>[<span class="ident">profile</span>.<span class="ident">release</span>]
<span class="ident">lto</span> <span class="op">=</span> <span class="bool-val">true</span></code></pre></div>
</li>
<li>Make sure that the crate type for a VM binding supports LTO. To our knowledge, <code>staticlib</code> and <code>cdylib</code> support LTO, and
<code>rlib</code> does <em>not</em> support LTO.</li>
</ol>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="active_plan/index.html" title="mmtk::vm::active_plan mod">active_plan</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="collection/index.html" title="mmtk::vm::collection mod">collection</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="edge_shape/index.html" title="mmtk::vm::edge_shape mod">edge_shape</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="object_model/index.html" title="mmtk::vm::object_model mod">object_model</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="reference_glue/index.html" title="mmtk::vm::reference_glue mod">reference_glue</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="scanning/index.html" title="mmtk::vm::scanning mod">scanning</a></div><div class="item-right docblock-short"></div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.VMGlobalLogBitSpec.html" title="mmtk::vm::VMGlobalLogBitSpec struct">VMGlobalLogBitSpec</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.VMLocalForwardingBitsSpec.html" title="mmtk::vm::VMLocalForwardingBitsSpec struct">VMLocalForwardingBitsSpec</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.VMLocalForwardingPointerSpec.html" title="mmtk::vm::VMLocalForwardingPointerSpec struct">VMLocalForwardingPointerSpec</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.VMLocalLOSMarkNurserySpec.html" title="mmtk::vm::VMLocalLOSMarkNurserySpec struct">VMLocalLOSMarkNurserySpec</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.VMLocalMarkBitSpec.html" title="mmtk::vm::VMLocalMarkBitSpec struct">VMLocalMarkBitSpec</a></div><div class="item-right docblock-short"></div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.GCThreadContext.html" title="mmtk::vm::GCThreadContext enum">GCThreadContext</a></div><div class="item-right docblock-short"><p>Thread context for the spawned GC thread.  It is used by spawn_gc_thread.</p>
</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ActivePlan.html" title="mmtk::vm::ActivePlan trait">ActivePlan</a></div><div class="item-right docblock-short"><p>VM-specific methods for the current plan.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Collection.html" title="mmtk::vm::Collection trait">Collection</a></div><div class="item-right docblock-short"><p>VM-specific methods for garbage collection.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.EdgeVisitor.html" title="mmtk::vm::EdgeVisitor trait">EdgeVisitor</a></div><div class="item-right docblock-short"><p>Callback trait of scanning functions that report edges.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Finalizable.html" title="mmtk::vm::Finalizable trait">Finalizable</a></div><div class="item-right docblock-short"><p>A finalizable object for MMTk. MMTk needs to know the actual object reference in the type,
while a binding can use this type to store some runtime information about finalizable objects.
For example, for bindings that allows multiple finalizer methods with one object, they can define
the type as a tuple of <code>(object, finalize method)</code>, and register different finalizer methods to MMTk
for the same object.
The implementation should mark theird method implementations as inline for performance.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ObjectModel.html" title="mmtk::vm::ObjectModel trait">ObjectModel</a></div><div class="item-right docblock-short"><p>VM-specific methods for object model.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ObjectTracer.html" title="mmtk::vm::ObjectTracer trait">ObjectTracer</a></div><div class="item-right docblock-short"><p>Callback trait of scanning functions that directly trace through edges.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ReferenceGlue.html" title="mmtk::vm::ReferenceGlue trait">ReferenceGlue</a></div><div class="item-right docblock-short"><p>VM-specific methods for reference processing, including weak references, and finalizers.
We handle weak references and finalizers differently:</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.RootsWorkFactory.html" title="mmtk::vm::RootsWorkFactory trait">RootsWorkFactory</a></div><div class="item-right docblock-short"><p>Root-scanning methods use this trait to create work packets for processing roots.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Scanning.html" title="mmtk::vm::Scanning trait">Scanning</a></div><div class="item-right docblock-short"><p>VM-specific methods for scanning roots/objects.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.VMBinding.html" title="mmtk::vm::VMBinding trait">VMBinding</a></div><div class="item-right docblock-short"><p>The <code>VMBinding</code> trait associates with each trait, and provides VM-specific constants.</p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="mmtk" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.59.0 (9d1b2106e 2022-02-23)" ></div>
</body></html>