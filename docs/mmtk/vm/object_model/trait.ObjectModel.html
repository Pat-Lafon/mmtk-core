<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="VM-specific methods for object model."><meta name="keywords" content="rust, rustlang, rust-lang, ObjectModel"><title>ObjectModel in mmtk::vm::object_model - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../storage.js"></script><script src="../../../crates.js"></script><script defer src="../../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../mmtk/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../../mmtk/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">ObjectModel</a></h2><div class="sidebar-elems"><div class="block items"><h3 class="sidebar-title"><a href="#associated-const">Associated Constants</a></h3><div class="sidebar-links"><a href="#associatedconstant.GLOBAL_LOG_BIT_SPEC">GLOBAL_LOG_BIT_SPEC</a><a href="#associatedconstant.LOCAL_FORWARDING_BITS_SPEC">LOCAL_FORWARDING_BITS_SPEC</a><a href="#associatedconstant.LOCAL_FORWARDING_POINTER_SPEC">LOCAL_FORWARDING_POINTER_SPEC</a><a href="#associatedconstant.LOCAL_LOS_MARK_NURSERY_SPEC">LOCAL_LOS_MARK_NURSERY_SPEC</a><a href="#associatedconstant.LOCAL_MARK_BIT_SPEC">LOCAL_MARK_BIT_SPEC</a></div><h3 class="sidebar-title"><a href="#required-methods">Required Methods</a></h3><div class="sidebar-links"><a href="#tymethod.compare_exchange_metadata">compare_exchange_metadata</a><a href="#tymethod.copy">copy</a><a href="#tymethod.copy_to">copy_to</a><a href="#tymethod.dump_object">dump_object</a><a href="#tymethod.fetch_add_metadata">fetch_add_metadata</a><a href="#tymethod.fetch_sub_metadata">fetch_sub_metadata</a><a href="#tymethod.get_align_offset_when_copied">get_align_offset_when_copied</a><a href="#tymethod.get_align_when_copied">get_align_when_copied</a><a href="#tymethod.get_current_size">get_current_size</a><a href="#tymethod.get_reference_when_copied_to">get_reference_when_copied_to</a><a href="#tymethod.get_size_when_copied">get_size_when_copied</a><a href="#tymethod.get_type_descriptor">get_type_descriptor</a><a href="#tymethod.load_metadata">load_metadata</a><a href="#tymethod.object_start_ref">object_start_ref</a><a href="#tymethod.ref_to_address">ref_to_address</a><a href="#tymethod.store_metadata">store_metadata</a></div><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div><h2 class="location"><a href="index.html">In mmtk::vm::object_model</a></h2><div id="sidebar-vars" data-name="ObjectModel" data-ty="trait" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../../mmtk/index.html"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Trait <a href="../../index.html">mmtk</a>::<wbr><a href="../index.html">vm</a>::<wbr><a href="index.html">object_model</a>::<wbr><a class="trait" href="#">ObjectModel</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#66-270">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust trait"><code>pub trait ObjectModel&lt;VM:&nbsp;<a class="trait" href="../trait.VMBinding.html" title="trait mmtk::vm::VMBinding">VMBinding</a>&gt; {
    const <a href="#associatedconstant.GLOBAL_LOG_BIT_SPEC" class="constant">GLOBAL_LOG_BIT_SPEC</a>: <a class="struct" href="specs/struct.VMGlobalLogBitSpec.html" title="struct mmtk::vm::object_model::specs::VMGlobalLogBitSpec">VMGlobalLogBitSpec</a>;
    const <a href="#associatedconstant.LOCAL_FORWARDING_POINTER_SPEC" class="constant">LOCAL_FORWARDING_POINTER_SPEC</a>: <a class="struct" href="specs/struct.VMLocalForwardingPointerSpec.html" title="struct mmtk::vm::object_model::specs::VMLocalForwardingPointerSpec">VMLocalForwardingPointerSpec</a>;
    const <a href="#associatedconstant.LOCAL_FORWARDING_BITS_SPEC" class="constant">LOCAL_FORWARDING_BITS_SPEC</a>: <a class="struct" href="specs/struct.VMLocalForwardingBitsSpec.html" title="struct mmtk::vm::object_model::specs::VMLocalForwardingBitsSpec">VMLocalForwardingBitsSpec</a>;
    const <a href="#associatedconstant.LOCAL_MARK_BIT_SPEC" class="constant">LOCAL_MARK_BIT_SPEC</a>: <a class="struct" href="specs/struct.VMLocalMarkBitSpec.html" title="struct mmtk::vm::object_model::specs::VMLocalMarkBitSpec">VMLocalMarkBitSpec</a>;
    const <a href="#associatedconstant.LOCAL_LOS_MARK_NURSERY_SPEC" class="constant">LOCAL_LOS_MARK_NURSERY_SPEC</a>: <a class="struct" href="specs/struct.VMLocalLOSMarkNurserySpec.html" title="struct mmtk::vm::object_model::specs::VMLocalLOSMarkNurserySpec">VMLocalLOSMarkNurserySpec</a>;
<details class="rustdoc-toggle type-contents-toggle"><summary class="hideme"><span>Show 16 methods</span></summary>
    fn <a href="#tymethod.load_metadata" class="fnname">load_metadata</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metadata_spec: &amp;<a class="struct" href="../../util/metadata/header_metadata/struct.HeaderMetadataSpec.html" title="struct mmtk::util::metadata::header_metadata::HeaderMetadataSpec">HeaderMetadataSpec</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mask: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atomic_ordering: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/sync/atomic/enum.Ordering.html" title="enum core::sync::atomic::Ordering">Ordering</a>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.store_metadata" class="fnname">store_metadata</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metadata_spec: &amp;<a class="struct" href="../../util/metadata/header_metadata/struct.HeaderMetadataSpec.html" title="struct mmtk::util::metadata::header_metadata::HeaderMetadataSpec">HeaderMetadataSpec</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mask: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atomic_ordering: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/sync/atomic/enum.Ordering.html" title="enum core::sync::atomic::Ordering">Ordering</a>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;);
<div class="item-spacer"></div>    fn <a href="#tymethod.compare_exchange_metadata" class="fnname">compare_exchange_metadata</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metadata_spec: &amp;<a class="struct" href="../../util/metadata/header_metadata/struct.HeaderMetadataSpec.html" title="struct mmtk::util::metadata::header_metadata::HeaderMetadataSpec">HeaderMetadataSpec</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;old_val: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new_val: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mask: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success_order: <a class="enum" href="https://doc.rust-lang.org/nightly/core/sync/atomic/enum.Ordering.html" title="enum core::sync::atomic::Ordering">Ordering</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;failure_order: <a class="enum" href="https://doc.rust-lang.org/nightly/core/sync/atomic/enum.Ordering.html" title="enum core::sync::atomic::Ordering">Ordering</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.fetch_add_metadata" class="fnname">fetch_add_metadata</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metadata_spec: &amp;<a class="struct" href="../../util/metadata/header_metadata/struct.HeaderMetadataSpec.html" title="struct mmtk::util::metadata::header_metadata::HeaderMetadataSpec">HeaderMetadataSpec</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order: <a class="enum" href="https://doc.rust-lang.org/nightly/core/sync/atomic/enum.Ordering.html" title="enum core::sync::atomic::Ordering">Ordering</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.fetch_sub_metadata" class="fnname">fetch_sub_metadata</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metadata_spec: &amp;<a class="struct" href="../../util/metadata/header_metadata/struct.HeaderMetadataSpec.html" title="struct mmtk::util::metadata::header_metadata::HeaderMetadataSpec">HeaderMetadataSpec</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order: <a class="enum" href="https://doc.rust-lang.org/nightly/core/sync/atomic/enum.Ordering.html" title="enum core::sync::atomic::Ordering">Ordering</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.copy" class="fnname">copy</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;semantics: <a class="enum" href="../../util/copy/enum.CopySemantics.html" title="enum mmtk::util::copy::CopySemantics">CopySemantics</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;copy_context: &amp;mut <a class="struct" href="../../util/copy/struct.GCWorkerCopyContext.html" title="struct mmtk::util::copy::GCWorkerCopyContext">GCWorkerCopyContext</a>&lt;VM&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.copy_to" class="fnname">copy_to</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;region: <a class="struct" href="../../util/address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="../../util/address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.get_reference_when_copied_to" class="fnname">get_reference_when_copied_to</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to: <a class="struct" href="../../util/address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.get_current_size" class="fnname">get_current_size</a>(object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.get_size_when_copied" class="fnname">get_size_when_copied</a>(object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.get_align_when_copied" class="fnname">get_align_when_copied</a>(object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.get_align_offset_when_copied" class="fnname">get_align_offset_when_copied</a>(object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.isize.html">isize</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.get_type_descriptor" class="fnname">get_type_descriptor</a>(reference: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;'static [</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i8.html">i8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.object_start_ref" class="fnname">object_start_ref</a>(object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>) -&gt; <a class="struct" href="../../util/address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.ref_to_address" class="fnname">ref_to_address</a>(object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>) -&gt; <a class="struct" href="../../util/address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.dump_object" class="fnname">dump_object</a>(object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>);
</details>}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>VM-specific methods for object model.</p>
<p>This trait includes 3 parts:</p>
<ol>
<li>Specifications for per object metadata: a binding needs to specify the location for each per object metadata spec.
A binding can choose between <code>in_header()</code> or <code>side()</code>, e.g. <code>VMGlobalLogBitSpec::side()</code>.
<ul>
<li>in_header: a binding needs to specify the bit offset to an object reference that can be used for the per object metadata spec.
The actual number of bits required for a spec can be obtained from the <code>num_bits()</code> method of the spec type.</li>
<li>side: a binding does not need to provide any specific storage for metadata in the header. Instead, MMTk
will use side tables to store the metadata. The following section Side Specs Layout will discuss how to correctly create
side metadata specs.</li>
</ul>
</li>
<li>In header metadata access: A binding
need to further define the functions with suffix _metadata about how to access the bits in the header. A binding may use
functions in the <a href="../util/metadata/header_metadata/index.html"><code>header_metadata</code></a> module if the bits are always available to MMTk, or they could implement their
own routines to access the bits if VM specific treatment is needed (e.g. some bits are not always available to MMTk).</li>
<li>VM-specific object info needed by MMTk: MMTk does not know object info as it is VM specific. However, MMTk needs
some object information for GC. A binding needs to implement them correctly.</li>
</ol>
<p>Note that depending on the selected GC plan, only a subset of the methods provided here will be used.</p>
<p>Side Specs Layout</p>
<p>Short version</p>
<ul>
<li>For <em>global</em> side metadata:
<ul>
<li>The first spec: VMGlobalXXXSpec::side_first()</li>
<li>The following specs: VMGlobalXXXSpec::side_after(FIRST_GLOAL.as_spec())</li>
</ul>
</li>
<li>For <em>local</em> side metadata:
<ul>
<li>The first spec: VMLocalXXXSpec::side_first()</li>
<li>The following specs: VMLocalXXXSpec::side_after(FIRST_LOCAL.as_spec())</li>
</ul>
</li>
</ul>
<p>Detailed explanation</p>
<p>There are two types of side metadata layout in MMTk:</p>
<ol>
<li>Contiguous layout: is the layout in which the whole metadata space for a SideMetadataSpec is contiguous.</li>
<li>Chunked layout: is the layout in which the whole metadata memory space, that is shared between MMTk policies, is divided into metadata-chunks. Each metadata-chunk stores all of the metadata for all <code>SideMetadataSpec</code>s which apply to a source-data chunk.</li>
</ol>
<p>In 64-bits targets, both Global and PolicySpecific side metadata are contiguous.
Also, in 32-bits targets, the Global side metadata is contiguous.
This means if the starting address (variable named <code>offset</code>) of the metadata space for a SideMetadataSpec (<code>SPEC1</code>) is <code>BASE1</code>, the starting address (<code>offset</code>) of the next SideMetadataSpec (<code>SPEC2</code>) will be <code>BASE1 + total_metadata_space_size(SPEC1)</code>, which is located immediately after the end of the whole metadata space of <code>SPEC1</code>.
Now, if we add a third SideMetadataSpec (<code>SPEC3</code>), its starting address (<code>offset</code>) will be <code>BASE2 + total_metadata_space_size(SPEC2)</code>, which is located immediately after the end of the whole metadata space of <code>SPEC2</code>.</p>
<p>In 32-bits targets, the PolicySpecific side metadata is chunked.
This means for each chunk (2^22 Bytes) of data, which, by definition, is managed by exactly one MMTk policy, there is a metadata chunk (2^22 * some_fixed_ratio Bytes) that contains all of its PolicySpecific metadata.
This means if a policy has one SideMetadataSpec (<code>LS1</code>), the <code>offset</code> of that spec will be <code>0</code> (= at the start of a metadata chunk).
If there is a second SideMetadataSpec (<code>LS2</code>) for this specific policy, the <code>offset</code> for that spec will be <code>0 + required_metadata_space_per_chunk(LS1)</code>,
and for a third SideMetadataSpec (<code>LS3</code>), the <code>offset</code> will be <code>BASE(LS2) + required_metadata_space_per_chunk(LS2)</code>.</p>
<p>For all other policies, the <code>offset</code> starts from zero. This is safe because no two policies ever manage one chunk, so there will be no overlap.</p>
</div></details><h2 id="associated-const" class="small-section-header">Associated Constants<a href="#associated-const" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="associatedconstant.GLOBAL_LOG_BIT_SPEC" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#76">source</a></div><h4 class="code-header">const <a href="#associatedconstant.GLOBAL_LOG_BIT_SPEC" class="constant">GLOBAL_LOG_BIT_SPEC</a>: <a class="struct" href="specs/struct.VMGlobalLogBitSpec.html" title="struct mmtk::vm::object_model::specs::VMGlobalLogBitSpec">VMGlobalLogBitSpec</a></h4></div></summary><div class="docblock"><p>The metadata specification of the global log bit. 1 bit.
Note that for this bit, 0 represents logged (default), and 1 represents unlogged.
This bit is also referred to as unlogged bit in Java MMTk for this reason.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedconstant.LOCAL_FORWARDING_POINTER_SPEC" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#79">source</a></div><h4 class="code-header">const <a href="#associatedconstant.LOCAL_FORWARDING_POINTER_SPEC" class="constant">LOCAL_FORWARDING_POINTER_SPEC</a>: <a class="struct" href="specs/struct.VMLocalForwardingPointerSpec.html" title="struct mmtk::vm::object_model::specs::VMLocalForwardingPointerSpec">VMLocalForwardingPointerSpec</a></h4></div></summary><div class="docblock"><p>The metadata specification for the forwarding pointer, used by copying plans. Word size.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedconstant.LOCAL_FORWARDING_BITS_SPEC" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#81">source</a></div><h4 class="code-header">const <a href="#associatedconstant.LOCAL_FORWARDING_BITS_SPEC" class="constant">LOCAL_FORWARDING_BITS_SPEC</a>: <a class="struct" href="specs/struct.VMLocalForwardingBitsSpec.html" title="struct mmtk::vm::object_model::specs::VMLocalForwardingBitsSpec">VMLocalForwardingBitsSpec</a></h4></div></summary><div class="docblock"><p>The metadata specification for the forwarding status bits, used by copying plans. 2 bits.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedconstant.LOCAL_MARK_BIT_SPEC" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#83">source</a></div><h4 class="code-header">const <a href="#associatedconstant.LOCAL_MARK_BIT_SPEC" class="constant">LOCAL_MARK_BIT_SPEC</a>: <a class="struct" href="specs/struct.VMLocalMarkBitSpec.html" title="struct mmtk::vm::object_model::specs::VMLocalMarkBitSpec">VMLocalMarkBitSpec</a></h4></div></summary><div class="docblock"><p>The metadata specification for the mark bit, used by most plans that need to mark live objects. 1 bit.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedconstant.LOCAL_LOS_MARK_NURSERY_SPEC" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#85">source</a></div><h4 class="code-header">const <a href="#associatedconstant.LOCAL_LOS_MARK_NURSERY_SPEC" class="constant">LOCAL_LOS_MARK_NURSERY_SPEC</a>: <a class="struct" href="specs/struct.VMLocalLOSMarkNurserySpec.html" title="struct mmtk::vm::object_model::specs::VMLocalLOSMarkNurserySpec">VMLocalLOSMarkNurserySpec</a></h4></div></summary><div class="docblock"><p>The metadata specification for the mark-and-nursery bits, used by most plans that has large object allocation. 2 bits.</p>
</div></details></div><h2 id="required-methods" class="small-section-header">Required methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="tymethod.load_metadata" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#98-103">source</a></div><h4 class="code-header">fn <a href="#tymethod.load_metadata" class="fnname">load_metadata</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;metadata_spec: &amp;<a class="struct" href="../../util/metadata/header_metadata/struct.HeaderMetadataSpec.html" title="struct mmtk::util::metadata::header_metadata::HeaderMetadataSpec">HeaderMetadataSpec</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;mask: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;atomic_ordering: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/sync/atomic/enum.Ordering.html" title="enum core::sync::atomic::Ordering">Ordering</a>&gt;<br>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></summary><div class="docblock"><p>A function to load the specified per-object metadata’s content.</p>
<h5 id="arguments"><a href="#arguments">Arguments:</a></h5>
<ul>
<li><code>metadata_spec</code>: is one of the const <code>MetadataSpec</code> instances from the ObjectModel trait, for the target metadata. Whether the metadata is in-header or on-side is a VM-specific choice.</li>
<li><code>object</code>: is a reference to the target object.</li>
<li><code>mask</code>: is an optional mask value for the metadata. This value is used in cases like the forwarding pointer metadata, where some of the bits are reused by other metadata such as the forwarding bits.</li>
<li><code>atomic_ordering</code>: is an optional atomic ordering for the load operation. An input value of <code>None</code> means the load operation is not atomic, and an input value of <code>Some(Ordering::X)</code> means the atomic load operation will use the <code>Ordering::X</code>.</li>
</ul>
<h5 id="returns-the-metadata-value-as-a-word-if-the-metadata-size-is-less-than-a-word-the-effective-value-is-stored-in-the-low-order-bits-of-the-word"><a href="#returns-the-metadata-value-as-a-word-if-the-metadata-size-is-less-than-a-word-the-effective-value-is-stored-in-the-low-order-bits-of-the-word">Returns the metadata value as a word. If the metadata size is less than a word, the effective value is stored in the low-order bits of the word.</a></h5></div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.store_metadata" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#115-121">source</a></div><h4 class="code-header">fn <a href="#tymethod.store_metadata" class="fnname">store_metadata</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;metadata_spec: &amp;<a class="struct" href="../../util/metadata/header_metadata/struct.HeaderMetadataSpec.html" title="struct mmtk::util::metadata::header_metadata::HeaderMetadataSpec">HeaderMetadataSpec</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;val: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;mask: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;atomic_ordering: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/sync/atomic/enum.Ordering.html" title="enum core::sync::atomic::Ordering">Ordering</a>&gt;<br>)</h4></div></summary><div class="docblock"><p>A function to store a value to the specified per-object metadata.</p>
<h5 id="arguments-1"><a href="#arguments-1">Arguments:</a></h5>
<ul>
<li><code>metadata_spec</code>: is one of the const <code>MetadataSpec</code> instances from the ObjectModel trait, for the target metadata. Whether the metadata is in-header or on-side is a VM-specific choice.</li>
<li><code>object</code>: is a reference to the target object.</li>
<li><code>val</code>: is the new metadata value to be stored.</li>
<li><code>mask</code>: is an optional mask value for the metadata. This value is used in cases like the forwarding pointer metadata, where some of the bits are reused by other metadata such as the forwarding bits.</li>
<li><code>atomic_ordering</code>: is an optional atomic ordering for the store operation. An input value of <code>None</code> means the store operation is not atomic, and an input value of <code>Some(Ordering::X)</code> means the atomic store operation will use the <code>Ordering::X</code>.</li>
</ul>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.compare_exchange_metadata" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#137-145">source</a></div><h4 class="code-header">fn <a href="#tymethod.compare_exchange_metadata" class="fnname">compare_exchange_metadata</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;metadata_spec: &amp;<a class="struct" href="../../util/metadata/header_metadata/struct.HeaderMetadataSpec.html" title="struct mmtk::util::metadata::header_metadata::HeaderMetadataSpec">HeaderMetadataSpec</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;old_val: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;new_val: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;mask: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;success_order: <a class="enum" href="https://doc.rust-lang.org/nightly/core/sync/atomic/enum.Ordering.html" title="enum core::sync::atomic::Ordering">Ordering</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;failure_order: <a class="enum" href="https://doc.rust-lang.org/nightly/core/sync/atomic/enum.Ordering.html" title="enum core::sync::atomic::Ordering">Ordering</a><br>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></div></summary><div class="docblock"><p>A function to atomically compare-and-exchange the specified per-object metadata’s content.</p>
<h5 id="arguments-2"><a href="#arguments-2">Arguments:</a></h5>
<ul>
<li><code>metadata_spec</code>: is one of the const <code>MetadataSpec</code> instances from the ObjectModel trait, for the target metadata. Whether the metadata is in-header or on-side is a VM-specific choice.</li>
<li><code>object</code>: is a reference to the target object.</li>
<li><code>old_val</code>: is the expected current value of the metadata.</li>
<li><code>new_val</code>: is the new metadata value to be stored if the compare-and-exchange operation is successful.</li>
<li><code>mask</code>: is an optional mask value for the metadata. This value is used in cases like the forwarding pointer metadata, where some of the bits are reused by other metadata such as the forwarding bits.</li>
<li><code>success_order</code>: is the atomic ordering used if the operation is successful.</li>
<li><code>failure_order</code>: is the atomic ordering used if the operation fails.</li>
</ul>
<h5 id="returns-true-if-the-operation-is-successful-and-false-otherwise"><a href="#returns-true-if-the-operation-is-successful-and-false-otherwise">Returns <code>true</code> if the operation is successful, and <code>false</code> otherwise.</a></h5></div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.fetch_add_metadata" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#158-163">source</a></div><h4 class="code-header">fn <a href="#tymethod.fetch_add_metadata" class="fnname">fetch_add_metadata</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;metadata_spec: &amp;<a class="struct" href="../../util/metadata/header_metadata/struct.HeaderMetadataSpec.html" title="struct mmtk::util::metadata::header_metadata::HeaderMetadataSpec">HeaderMetadataSpec</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;val: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;order: <a class="enum" href="https://doc.rust-lang.org/nightly/core/sync/atomic/enum.Ordering.html" title="enum core::sync::atomic::Ordering">Ordering</a><br>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></summary><div class="docblock"><p>A function to atomically perform an add operation on the specified per-object metadata’s content.</p>
<h5 id="arguments-3"><a href="#arguments-3">Arguments:</a></h5>
<ul>
<li><code>metadata_spec</code>: is one of the const <code>MetadataSpec</code> instances from the ObjectModel trait, for the target metadata. Whether the metadata is in-header or on-side is a VM-specific choice.</li>
<li><code>object</code>: is a reference to the target object.</li>
<li><code>val</code>: is the value to be added to the current value of the metadata.</li>
<li><code>order</code>: is the atomic ordering of the fetch-and-add operation.</li>
</ul>
<h5 id="returns-the-old-metadata-value-as-a-word"><a href="#returns-the-old-metadata-value-as-a-word">Returns the old metadata value as a word.</a></h5></div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.fetch_sub_metadata" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#176-181">source</a></div><h4 class="code-header">fn <a href="#tymethod.fetch_sub_metadata" class="fnname">fetch_sub_metadata</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;metadata_spec: &amp;<a class="struct" href="../../util/metadata/header_metadata/struct.HeaderMetadataSpec.html" title="struct mmtk::util::metadata::header_metadata::HeaderMetadataSpec">HeaderMetadataSpec</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;val: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;order: <a class="enum" href="https://doc.rust-lang.org/nightly/core/sync/atomic/enum.Ordering.html" title="enum core::sync::atomic::Ordering">Ordering</a><br>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></summary><div class="docblock"><p>A function to atomically perform a subtract operation on the specified per-object metadata’s content.</p>
<h5 id="arguments-4"><a href="#arguments-4">Arguments:</a></h5>
<ul>
<li><code>metadata_spec</code>: is one of the const <code>MetadataSpec</code> instances from the ObjectModel trait, for the target metadata. Whether the metadata is in-header or on-side is a VM-specific choice.</li>
<li><code>object</code>: is a reference to the target object.</li>
<li><code>val</code>: is the value to be subtracted from the current value of the metadata.</li>
<li><code>order</code>: is the atomic ordering of the fetch-and-add operation.</li>
</ul>
<h5 id="returns-the-old-metadata-value-as-a-word-1"><a href="#returns-the-old-metadata-value-as-a-word-1">Returns the old metadata value as a word.</a></h5></div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.copy" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#191-195">source</a></div><h4 class="code-header">fn <a href="#tymethod.copy" class="fnname">copy</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;from: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;semantics: <a class="enum" href="../../util/copy/enum.CopySemantics.html" title="enum mmtk::util::copy::CopySemantics">CopySemantics</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;copy_context: &amp;mut <a class="struct" href="../../util/copy/struct.GCWorkerCopyContext.html" title="struct mmtk::util::copy::GCWorkerCopyContext">GCWorkerCopyContext</a>&lt;VM&gt;<br>) -&gt; <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a></h4></div></summary><div class="docblock"><p>Copy an object and return the address of the new object. Usually in the implementation of this method,
<code>alloc_copy()</code> and <code>post_copy()</code> from <a href="util/copy/struct.GCWorkerCopyContext.html"><code>GCWorkerCopyContext</code></a>
are used for copying.</p>
<p>Arguments:</p>
<ul>
<li><code>from</code>: The address of the object to be copied.</li>
<li><code>semantics</code>: The copy semantic to use.</li>
<li><code>copy_context</code>: The <code>GCWorkerCopyContext</code> for the GC thread.</li>
</ul>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.copy_to" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#208">source</a></div><h4 class="code-header">fn <a href="#tymethod.copy_to" class="fnname">copy_to</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;from: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;to: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;region: <a class="struct" href="../../util/address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a><br>) -&gt; <a class="struct" href="../../util/address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a></h4></div></summary><div class="docblock"><p>Copy an object. This is required
for delayed-copy collectors such as compacting collectors. During the
collection, MMTk reserves a region in the heap for an object as per
requirements found from <code>ObjectModel</code> and then asks <code>ObjectModel</code> to
determine what the object’s reference will be post-copy. Return the address
past the end of the copied object.</p>
<p>Arguments:</p>
<ul>
<li><code>from</code>: The address of the object to be copied.</li>
<li><code>to</code>: The target location.</li>
<li>`region: The start of the region that was reserved for this object.</li>
</ul>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.get_reference_when_copied_to" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#217">source</a></div><h4 class="code-header">fn <a href="#tymethod.get_reference_when_copied_to" class="fnname">get_reference_when_copied_to</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;from: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;to: <a class="struct" href="../../util/address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a><br>) -&gt; <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a></h4></div></summary><div class="docblock"><p>Return the reference that an object will be referred to after it is copied
to the specified region. Used in delayed-copy collectors such as compacting
collectors.</p>
<p>Arguments:</p>
<ul>
<li><code>from</code>: The object to be copied.</li>
<li><code>to</code>: The region to be copied to.</li>
</ul>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.get_current_size" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#223">source</a></div><h4 class="code-header">fn <a href="#tymethod.get_current_size" class="fnname">get_current_size</a>(object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></summary><div class="docblock"><p>Return the size used by an object.</p>
<p>Arguments:</p>
<ul>
<li><code>object</code>: The object to be queried.</li>
</ul>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.get_size_when_copied" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#229">source</a></div><h4 class="code-header">fn <a href="#tymethod.get_size_when_copied" class="fnname">get_size_when_copied</a>(object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></summary><div class="docblock"><p>Return the size when an object is copied.</p>
<p>Arguments:</p>
<ul>
<li><code>object</code>: The object to be queried.</li>
</ul>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.get_align_when_copied" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#235">source</a></div><h4 class="code-header">fn <a href="#tymethod.get_align_when_copied" class="fnname">get_align_when_copied</a>(object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></div></summary><div class="docblock"><p>Return the alignment when an object is copied.</p>
<p>Arguments:</p>
<ul>
<li><code>object</code>: The object to be queried.</li>
</ul>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.get_align_offset_when_copied" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#241">source</a></div><h4 class="code-header">fn <a href="#tymethod.get_align_offset_when_copied" class="fnname">get_align_offset_when_copied</a>(object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.isize.html">isize</a></h4></div></summary><div class="docblock"><p>Return the alignment offset when an object is copied.</p>
<p>Arguments:</p>
<ul>
<li><code>object</code>: The object to be queried.</li>
</ul>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.get_type_descriptor" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#249">source</a></div><h4 class="code-header">fn <a href="#tymethod.get_type_descriptor" class="fnname">get_type_descriptor</a>(reference: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;'static [</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i8.html">i8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a></h4></div></summary><div class="docblock"><p>Get the type descriptor for an object.</p>
<p>FIXME: Do we need this? If so, determine lifetime, return byte[]</p>
<p>Arguments:</p>
<ul>
<li><code>reference</code>: The object to be queried.</li>
</ul>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.object_start_ref" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#255">source</a></div><h4 class="code-header">fn <a href="#tymethod.object_start_ref" class="fnname">object_start_ref</a>(object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>) -&gt; <a class="struct" href="../../util/address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a></h4></div></summary><div class="docblock"><p>Return the lowest address of the storage associated with an object.</p>
<p>Arguments:</p>
<ul>
<li><code>object</code>: The object to be queried.</li>
</ul>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.ref_to_address" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#263">source</a></div><h4 class="code-header">fn <a href="#tymethod.ref_to_address" class="fnname">ref_to_address</a>(object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>) -&gt; <a class="struct" href="../../util/address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a></h4></div></summary><div class="docblock"><p>Return an address guaranteed to be inside the storage associated
with an object.</p>
<p>Arguments:</p>
<ul>
<li><code>object</code>: The object to be queried.</li>
</ul>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.dump_object" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../src/mmtk/vm/object_model.rs.html#269">source</a></div><h4 class="code-header">fn <a href="#tymethod.dump_object" class="fnname">dump_object</a>(object: <a class="struct" href="../../util/address/struct.ObjectReference.html" title="struct mmtk::util::address::ObjectReference">ObjectReference</a>)</h4></div></summary><div class="docblock"><p>Dump debugging information for an object.</p>
<p>Arguments:</p>
<ul>
<li><code>object</code>: The object to be dumped.</li>
</ul>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"></div><script type="text/javascript" src="../../../implementors/mmtk/vm/object_model/trait.ObjectModel.js" async></script></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="mmtk" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.60.0-nightly (e646f3d2a 2022-02-10)" ></div>
</body></html>